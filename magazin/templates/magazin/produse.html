{% extends "magazin/baza.html" %}
{%load pret_euro %}

{% block continut %}

<h1>Produse</h1>


<form method="get" class="filtru-form">
    <fieldset>
        <legend>Filtrare produse</legend>

        {{ form.non_field_errors }}

        <p>
            {{ form.nume.label_tag }}
            {{ form.nume }}
            {{ form.nume.errors }}
        </p>

        <p>
            {{ form.pret_min.label_tag }}
            {{ form.pret_min }}
            {{ form.pret_min.errors }}
        </p>

        <p>
            {{ form.pret_max.label_tag }}
            {{ form.pret_max }}
            {{ form.pret_max.errors }}
        </p>

        <p>
            {{ form.categorie.label_tag }}
            {{ form.categorie }}
            {{ form.categorie.errors }}
        </p>

        <p>
            {{ form.activ }}
            {{ form.activ.label_tag }}
        </p>

        <p>
            {{ form.per_page.label_tag }}
            {{ form.per_page }}
            {{ form.per_page.errors }}
        </p>

        <button type="submit">Filtrează</button>
        <a href="{% url 'produse' %}"
        onclick="return confirm('Resetarea va șterge toate filtrele aplicate. Continui?');">
        Reset filtre
    </a>
    </fieldset>
</form>


{% if mesaj_paginare %}
    <p style="color: orange;"><strong>{{ mesaj_paginare }}</strong></p>
{% endif %}

<hr>


{% for produs in page_obj %}
    <div class="produs">
        <h3>
            <a href="{% url 'detaliu_produs' produs.id %}">
                {{ produs.nume }}
            </a>
        </h3>

        <span class="pret-ron">
            Pret: {{ produs.pret }} RON
            <span class="pret-eur">
                ({% pret_euro produs.pret %} EUR)
            </span>
        </span>
        
        <p>
            <strong>Categorie:</strong>
            <a href="{% url 'categorie' produs.categorie.nume %}"
                style="color: {{ produs.categorie.culoare }};">
                <i class="fa {{ produs.categorie.icon }}"></i>
                {{ produs.categorie.nume }}
            </a>
        </p>

        <p>
            <strong>Status:</strong>
            {% if produs.activ %}
                activ
            {% else %}
                inactiv
            {% endif %}
        </p>
    </div>

    <hr>
{% empty %}
    <p><strong>Nu există produse pentru filtrele selectate.</strong></p>
{% endfor %}

<div class="pagination">
    {% if page_obj.has_previous %}
        <a href="?{% if request.GET %}{{ request.GET.urlencode }}&{% endif %}page={{ page_obj.previous_page_number }}">
            &laquo; Anterior
        </a>
    {% endif %}

    <span>
        Pagina {{ page_obj.number }} din {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
        <a href="?{% if request.GET %}{{ request.GET.urlencode }}&{% endif %}page={{ page_obj.next_page_number }}">
            Următor &raquo;
        </a>
    {% endif %}
</div>


{% endblock %}




